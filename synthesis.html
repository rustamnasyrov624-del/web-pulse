<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S_Synthesis | 1.618</title>
    <link rel="stylesheet" href="style.css?v=11.0">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="proactive-agent">
    <canvas id="bg-canvas"></canvas>
    <div class="noise-overlay"></div>
    <div class="bg-gradient"></div>

    <main class="container">
        <header>
            <div class="brand">
                <a href="index.html" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 15px;">
                    <img src="assets/logo.png" alt="1.618" class="logo-icon-img">
                    <span class="logo-text">1.618</span>
                </a>
            </div>
            <h1 class="main-title">S_Synthesis</h1>
            <p class="subtitle">Эволюция мысли. Синтез стратегии. Твое преимущество в цифрах и текстах.</p>
        </header>

        <section id="synthesis-feed" class="synthesis-grid">
            <!-- Cards will be injected here -->
            <div class="glass-card loading-state">
                <p>Loading the next level of intelligence...</p>
            </div>
        </section>

        <footer style="margin-top: 80px; text-align: center; opacity: 0.5;">
            <p class="label">POWERED BY GOLDHUB ARCHITECT v3.1</p>
        </footer>
    </main>

    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm'
        
        const SUPABASE_URL = 'https://htskiitfjiaeupexvalo.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_95k9XN77rpfdoogJThv2eg_WpN29aCd';
        const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

        async function loadSynthesis() {
            const { data, error } = await supabase
                .from('strategy_logs')
                .select('*')
                .order('date', { ascending: false });

            const container = document.getElementById('synthesis-feed');
            
            if (error || !data || data.length === 0) {
                container.innerHTML = `
                    <div class="glass-card">
                        <h3>Начало пути</h3>
                        <p>Здесь будут появляться твои инсайты по стратегии. Пока данных нет, но архитектура готова.</p>
                        <span class="label">STATUS: WAITING_FOR_INPUT</span>
                    </div>
                `;
                return;
            }

            container.innerHTML = data.map(note => `
                <article class="glass-card synthesis-item">
                    <div class="card-header">
                        <span class="label">${new Date(note.date).toLocaleDateString()}</span>
                        <span class="label" style="color: var(--neon-green)">${note.tags || 'GENERAL'}</span>
                    </div>
                    <h3>${note.title}</h3>
                    <p>${note.content}</p>
                </article>
            `).join('');
        }

        document.addEventListener('DOMContentLoaded', loadSynthesis);
    </script>
    <script src="background.js"></script>
</body>
</html>
